{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="ClubHub, designed by Django Dynamos, is a full-stack campus connect website that strives to provide high-quality information about campus events.  It encourages user registration and interaction by offering the opportunity to create, read, update, and delete comments on individual events. Options are also available to share the site through social media (Facebook, X, and Instagram)">
    <meta name="keywords"
        content="club hub, college events, event sharing, college life, campus activities, community engagement">
    <meta name="author" content="Django Dynamos">
    <title>{% block title %}{% endblock %}</title>
    <link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css">
    {% load bootstrap5 %}
    {% bootstrap_css %}
    {% bootstrap_javascript %}
    {% load cloudinary %}
</head>

<body>

    <header>
        <nav class="navbar navbar-expand-lg navbar-light">
            <div class="container-fluid">
                <a class="navbar-brand" href="{% url 'home' %}">
                    <img src="{% static 'images/Andy-pic.jpg' %}" class="d-inline-block align-top logo" alt="Logo" width="50" height="50">
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavDropdown">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'home' %}">Home</a>
                        </li>
                        {% if user.is_authenticated %}

                        {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'login' %}">Login</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'signup' %}">Sign Up</a>
                        </li>
                        {% endif %}
                        <li class="nav-item dropdown">
                            
                                {% if user.is_authenticated %}
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    {{ user.username }}
                                </a>
                                {% else %}
                                <a class="nav-link" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    Account
                                </a>
                                {% endif %}
                            {% if user.is_authenticated %}
                            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                                <li><a class="dropdown-item" href="{% url 'profile' %}">Profile</a></li>
                                <hr>
                                <li><a class="dropdown-item" href="{% url 'logout' %}">Logout</a></li>
                            </ul>
                            {% else %}
                            {% endif %}
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    {% block content %}
    <main class="container">
        <div class="row">
            <div class="col-md-8">
                {% if messages %}
                    <div class="messages-success">
                        {% for message in messages %}
                        <p {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</p>
                        {% endfor %}
                    </div>
                {% endif %}
                {% block posts %}
                  {% for post in posts reversed %}
                    <h2><a href="{% url 'post_detail' post.pk %}">{{ post.title }}</a></h2>
                    <h5><strong>Username:</strong> {{post.author}} <strong>wrote</strong></h5>
                    
                        <img class="card-img-top img-fit" height="300px" src=" {{ post.image.url }}" alt="{{ post.title}}">
                    

                    
                    <p>{{ post.body | slice:":300" }}...</p>
                    <hr>
                  {% endfor %}
                    {% if request.user.is_authenticated and post.author == request.user %}
                        <div>
                            <button class="btn btn-primary"><a href="{% url 'edit_post' post.pk %}">Edit</a></button>
                            <span>  <button class="btn btn-warning"><a href="{% url 'delete_post' post.pk %}">Delete</a></button></span>
                        </div>
                    {% endif %}

                {% endblock posts %}
            </div>
            <div class="col-md-4">
                {% if user.is_authenticated %}
                  <h2>Create Post</h2>
                    <button class="btn btn-primary"><a href="{% url 'create_post' %}">Create Post</a></button>
                  </form>
                {% else %}
                  <h3>Please log in to create a post.</h3>
                  <button class="btn btn-primary"><a href="{% url 'login' %}">Login</a></button>
                {% endif %}
    {% endblock %}

</main>
<script src="https://kit.fontawesome.com/3c09670cc8.js" crossorigin="anonymous"></script>

</body>

</html>